# 5.2 web平台常见问题

**1.A**:发送短信，提示“调用短信发送接口失败：无法连接到http://x.x.x.x:9080/openmasservice.TCP 错误代码10061：由于目标机器积极拒绝，无法连接。...”   
<img src="../images/Page exception/SendSmsError16001.png" alt="图片被外星人掠走了┌(。Д。)┐" title="TCP 错误代码10061">  
**Q**:OpenMas服务没有启动或假死了。查看OpenMas基础组件服务是否正常启动，重新启动基础组件服务解决。  

------------
**2.A**:OpenMas企业门户结果页面显示“发送成功，未获取状态报告”，是什么原因？  
**Q**:可能的原因如下：    
1.短时间内网关还未将状态报告回复到OpenMAS，稍后刷新页面再查看，提示即可变为“发送成功”，一般短信48小时内网关返回回执，彩信为72小时之内网关返回回执。  
2.OpenMas基础组件服务重新启动，部分状态报告丢失。  
3.长时间大量群发短信均无状态报告，OpenMas基础组件服务没有将短信成功提交到网关，需检查OpenMas相关服务，确保正常启动（必要时尝试重新启动），然后重新提交发送。 
4.默认Application，用于接收上行状态报告的URL参数配置可能被意外修改了，默认值为：http://127.0.0.1:7000/NotifyReciever  
5.手机终端处于停机、关机、无信号、不在服务区、正在通话等状态下，无法立即返回状态报告，长时间不返回回执，导致状态报告丢失。  
6.一个接入号配置在多台设备上，导致行业网关随机分发状态报告给各个设备。  

------------
**3.A**:OpenMas企业门户结果页面显示“发送成功”，手机终端未收到或显示混乱或不显示，是什么原因？  
**Q**:  
1.网关签名与信息机上配置的签名长度不符  
2.手机不支持长短信或手机终端接收时出现异常，将SIM卡拔下，换手机使用；  
3.手机终端设置了垃圾短信拦截功能，关闭拦截功能，就可以正常收到；  
4.手机内存满，请及时清理旧短信记录；  
5.异网号码导致：移动网关下发异网手机号码（电信、联通手机号）短信时是将接入号随机转成移动手机号码发送对方，若是长短信则会分条发，那么发送方会是多个手机号码，接收端显示短信即会出现拼接混乱、显示不全、不显示的问题，这个属于行业内问题，无法解决；  
6.有关长短信问题，若有异议，请客户经理走工单到行业网关处咨询。  

> **小贴士**：什么是长短信？  
长短信，是指超过70字的短信（包括签名和符号），网关以多条短信形式下发至手机，老款手机终端采用翻页的形式显示，现智能手机直接拼接成一条显示。`由此导致手机接收不全，导致不完全显示，或不显示，或与其它短信拼接混乱。`  
**如何改善此类问题**：`联系客服或维护工程师，开启长短信标识功能“2位”标记法。`  
>>**注**：长短信标位数：  
**1位标识法**，长短信可发67字/条 （信息机默认配置此项）  
**2位标识法**，长短信可发66字/条 （开启此项，有效降低短信内容互串、异网发送失败率）  

------------
**4.A**:OpenMAS短信发送长期处于等待回执状态，如何确认短信是否发送成功？  
**Q**:查看dbo.COM__SmsSentHistory中GatewayStatus字段值，GatewayStatus值为“DELIVRD”的条目，说明短信已成功发送至手机。  

------------
**5.A**:收件箱页面报错，提示“应用服务器中的程序错误，无法将位于索引24处的Unicode字符\uD83D转换为指定的代码页”  
<img src="../images/Page exception/SmsInBoxError_Unicode.jpg" alt="图片被外星人掠走了┌(。Д。)┐" title="无法将位于索引24处的Unicode字符\uD83D转换为指定的代码页"> 
**Q**:手机回复了非法字符，比如特殊表情，特殊字符集。①手工在数据库清理异常数据，一般显示为乱码的数据就是了。②提交产品研发部增加界面友好展示。  

------------
**6.A**:OpenMAS短信超过日限部分，第二天是否自动重发？  
**Q**:不会自动重发，必须手动重发。  

------------
**7.A**:OpenMAS群发短信时某手机关机，开机后能否收到短信？  
**Q**:手机关机期间的短信，在开机后能否收到，要根据短信中心对于该手机号码的相关配置来确定；  
OpenMAS将短信送达网关后，网关直接将短信送至短信中心，有短信中心进行存储或转发。网关在OpenMAS关机期间发往OpenMAS的状态报告只发送三次，间隔十几秒，然后不论OpenMAS是否收到都将丢弃状态报告；当OpenMAS开机后就收不到状态报告了。

------------
**8.A**:访问OpenMAS门户，提示“WebServer Application Unavailable”    
**Q**:IIS服务出现错误，建议通过重启、修复或重装IIS服务，排除故障。    
